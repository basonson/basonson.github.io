<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"basonson.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.10.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

  <meta name="description" content="一． Redis常用知识1.  常用命令1)    keys * 查看所有键，只看键，不看值。 2)    dbsize 返回当前数据库中键的数量。 dbsize命令在返回结果时，不会遍历所有的键，而是直接获取Redis内置的键总数变量。所以时间复杂度是O(1)。而keys会遍历所有键，所以时间复杂度是O(n)。 通常生产环境禁止使用keys *命令。 3)    exists [key] 返回键">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis技术总结1-数据类型">
<meta property="og:url" content="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/index.html">
<meta property="og:site_name" content="大牙技术">
<meta property="og:description" content="一． Redis常用知识1.  常用命令1)    keys * 查看所有键，只看键，不看值。 2)    dbsize 返回当前数据库中键的数量。 dbsize命令在返回结果时，不会遍历所有的键，而是直接获取Redis内置的键总数变量。所以时间复杂度是O(1)。而keys会遍历所有键，所以时间复杂度是O(n)。 通常生产环境禁止使用keys *命令。 3)    exists [key] 返回键">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/1.png">
<meta property="og:image" content="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/2.png">
<meta property="og:image" content="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/3.png">
<meta property="og:image" content="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/4.png">
<meta property="article:published_time" content="2022-02-14T01:57:31.000Z">
<meta property="article:modified_time" content="2022-02-14T04:34:53.345Z">
<meta property="article:author" content="郭超">
<meta property="article:tag" content="数据类型">
<meta property="article:tag" content="常用命令">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/1.png">


<link rel="canonical" href="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","path":"2022/02/14/Redis技术总结1-数据类型/","title":"Redis技术总结1-数据类型"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Redis技术总结1-数据类型 | 大牙技术</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">大牙技术</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Chaos Guo's Personal WebSite</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%EF%BC%8E-Redis%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86"><span class="nav-number">1.</span> <span class="nav-text">一． Redis常用知识</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.</span> <span class="nav-text">1.  常用命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%86%85%E9%83%A8%E7%BC%96%E7%A0%81"><span class="nav-number">1.2.</span> <span class="nav-text">2.  数据类型及内部编码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%EF%BC%8E-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.</span> <span class="nav-text">二． 数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-string-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.1.</span> <span class="nav-text">1.  string(字符串)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-hash-%E5%93%88%E5%B8%8C"><span class="nav-number">2.2.</span> <span class="nav-text">2.  hash(哈希)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-list%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89"><span class="nav-number">2.3.</span> <span class="nav-text">3.  list（列表）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-set%EF%BC%88%E9%9B%86%E5%90%88%EF%BC%89"><span class="nav-number">2.4.</span> <span class="nav-text">4.  set（集合）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-zset%EF%BC%88%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89"><span class="nav-number">2.5.</span> <span class="nav-text">5.  zset（有序集合）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郭超"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">郭超</p>
  <div class="site-description" itemprop="description">学习,分享,进步</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://basonson.github.io/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭超">
      <meta itemprop="description" content="学习,分享,进步">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大牙技术">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Redis技术总结1-数据类型
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-02-14 09:57:31 / Modified: 12:34:53" itemprop="dateCreated datePublished" datetime="2022-02-14T09:57:31+08:00">2022-02-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL/" itemprop="url" rel="index"><span itemprop="name">NoSQL</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/NoSQL/Redis/" itemprop="url" rel="index"><span itemprop="name">Redis</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="一．-Redis常用知识"><a href="#一．-Redis常用知识" class="headerlink" title="一． Redis常用知识"></a>一． Redis常用知识</h3><h4 id="1-常用命令"><a href="#1-常用命令" class="headerlink" title="1.  常用命令"></a>1.  常用命令</h4><p><strong>1)    keys *</strong></p>
<p>查看所有键，只看键，不看值。</p>
<p><strong>2)    dbsize</strong></p>
<p>返回当前数据库中键的数量。</p>
<p>dbsize命令在返回结果时，不会遍历所有的键，而是直接获取Redis内置的键总数变量。所以时间复杂度是O(1)。而keys会遍历所有键，所以时间复杂度是O(n)。</p>
<p><strong>通常生产环境禁止使用keys *命令。</strong></p>
<p><strong>3)    exists [key]</strong></p>
<p>返回键是否存在，存在则返回1，不存在返回0。</p>
<p><strong>4)    del [key]</strong></p>
<p>删除键。返回成功删除键的个数。如果尝试删除一个不存在的键，那么返回0。可以同时删除多个键（多个键之间用空格分隔）。</p>
<p><strong>5)    expire [key] [seconds]</strong></p>
<p>对键添加过期时间。</p>
<p><strong>6)    ttl [key]</strong></p>
<p>显示离键过期的剩余时间。三种返回值：</p>
<p>a.   -2：key不存在。</p>
<p>b.   -1：key存在但已经过期。</p>
<p>c.   n：剩余时间(秒)。</p>
<p><strong>7)    type [key]</strong></p>
<p>返回键的类型（5种）。如果键不存在返回none。</p>
<h4 id="2-数据类型及内部编码"><a href="#2-数据类型及内部编码" class="headerlink" title="2.  数据类型及内部编码"></a>2.  数据类型及内部编码</h4><p>Redis有5种数据类型（type命令返回的值）分别是：</p>
<p><strong>string（字符串）</strong></p>
<p><strong>hash（哈希）</strong></p>
<p><strong>list（列表）</strong></p>
<p><strong>set（集合）</strong></p>
<p><strong>zset（有序集合）</strong></p>
<p>每种数据类型都有2种及以上的内部编码，如下图所示：</p>
<p><img src="/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/1.png" alt="img"><center><em>Redis数据类型的不同编码</em></center></p>
<p>用object encoding [key] 命令查询编码。</p>
<p>优点：</p>
<p><strong>1.</strong>   Redis可以在不改变对外接口的情况下，对内进行编码改进，提高性能，不影响用户正常使用。</p>
<p><strong>2.</strong>   多种内部编码可以在不同情形下发挥各自的优势。</p>
<p><strong>3.</strong>  单线程架构</p>
<p>Redis使用了单线程架构和I&#x2F;O多路复用模型来实现高性能的内存数据库服务。</p>
<p><img src="/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/2.png" alt="img"><center><em>Redis客户端与服务器交互过程</em></center></p>
<p><img src="/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/3.png" alt="img"><center><em>命令在队列中等待执行</em></center></p>
<p>Redis单线程但是依然很快的原因：</p>
<p><strong>1.</strong>   <strong>纯内存访问。</strong></p>
<p>Redis所有数据在内存中，内存访问速度可以到达100纳秒。这是Redis达到每秒万级访问的重要基础。</p>
<p><strong>2.</strong>   <strong>非阻塞I&#x2F;O。</strong></p>
<p>Redis使用epoll作为I&#x2F;O多路复用技术的实现，再加上Redis自身的事件处理模型将epoll中的连接、读写、关闭都转换为事件，不在网络I&#x2F;O上浪费过多的时间。</p>
<p>什么是epoll？</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/songchuwang1868/article/details/89877739">https://blog.csdn.net/songchuwang1868/article/details/89877739</a></p>
<p><strong>3.</strong>   <strong>单线程避免了线程切换造成的消耗。</strong></p>
<p>关于线程切换？</p>
<h3 id="二．-数据类型"><a href="#二．-数据类型" class="headerlink" title="二． 数据类型"></a>二． 数据类型</h3><h4 id="1-string-字符串"><a href="#1-string-字符串" class="headerlink" title="1.  string(字符串)"></a>1.  string(字符串)</h4><p>Redis字符串类型的值可以为简单的字符串、复杂的字符串（JSON，XML）、数字（整型，浮点型），甚至二进制（图片，音频，视频），但是最大不能超过512M</p>
<p><strong>1.1  常用命令</strong></p>
<p>除了get，set外，还有setnx，setxx，mset，mget，incr。</p>
<p><strong>1)    setnx&#x2F;setxx</strong></p>
<p>setnx是键必须不存在，才能设置成功，常用于新增。</p>
<p>setxx是键必须存在，才能设置成功，常用于更新。</p>
<p><strong>关键应用场景：</strong></p>
<p>setnx可以作为分布式锁的一种实现方案：如果多个客户端同时执行setnx [key] [value]，根据setnx的特性，只有一个客户端能设置成功。</p>
<p><strong>2)    mset&#x2F;mget</strong></p>
<p>批量执行。</p>
<p><strong>原因：</strong></p>
<p>Redis可以支撑每秒11w次的读操作&#x2F;8w次的写操作，这指的是Redis服务端的处理能力，对于客户端来说，一次命令除了执行时间还有网络时间。</p>
<p>用get命令：n次get时间&#x3D;n次网络时间+n次命令时间</p>
<p>用mget命令：n次get时间&#x3D;1次网络时间+n次命令时间</p>
<p>假如1次网络时间为1ms，1次执行时间为0.1ms。那么1000个get命令时间为1.1s，1个包含1000个key的mget命令为0.101s。</p>
<p><strong>3)    incr</strong></p>
<p>incr命令用于对值做自增操作。返回结果分为三种：</p>
<p>a.   error：值不是整数，返回错误信息。</p>
<p>b.   值是整数，返回自增之后的结果。</p>
<p>c.   键不存在，按照值为0自增，返回1.</p>
<p><strong>1.2  内部编码</strong></p>
<p>字符串类型的内部编码有3种：</p>
<p><strong>1)    int</strong></p>
<p>8个字节的长整型</p>
<p><strong>2)    embstr</strong></p>
<p>小于等于39个字节的字符串</p>
<p><strong>3)    raw</strong></p>
<p>大于39个字节的字符串</p>
<p><strong>1.3  典型场景</strong></p>
<p><strong>1)    最常用的缓存功能</strong></p>
<p><strong>2)    计数器</strong></p>
<p>播放数、点赞数。</p>
<p><strong>3)    共享session</strong></p>
<p>使用Redis对session进行集中管理。</p>
<p><strong>4)    限制操作次数</strong></p>
<p>一个操作之后在Redis中给相应操作增加一个key和一个n秒过期时间，再次操作时判断key是否存在，如果存在那么直接返回失败。</p>
<h4 id="2-hash-哈希"><a href="#2-hash-哈希" class="headerlink" title="2.  hash(哈希)"></a>2.  hash(哈希)</h4><p>哈希类型指的是键的值，本身是一个键值对类型。如下图所示：</p>
<p><img src="/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%931-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/4.png" alt="img"><center><em>string与hash对比</em></center></p>
<p><strong>2.1  常用命令</strong></p>
<p>命令几乎都是h开头，比如hset，hget，h代表hash。</p>
<p><strong>2.2  内部编码</strong></p>
<p>哈希类型的内部编码有2种：</p>
<p><strong>1)    ziplist</strong></p>
<p>当哈希类型元素个数小于512个、同时所有值都小于64个字节时（512与64均为可配置项），Redis会使用ziplist作为哈希的内部实现。ziplist使用更紧凑的结构实现多个元素的连续存储，在节省内存方面更优秀。</p>
<p><strong>2)    hashtable</strong></p>
<p>当不满足ziplist的条件时，Redis会使用hashtable作为哈希的内部实现。因为此时ziplist的读写效率会下降，但是hashtable的读写时间复杂度是O(1)。</p>
<p><strong>2.3  使用场景</strong></p>
<p>用于缓存关系型数据库表中的每行信息（例如对比图中的用户信息）。但是哈希类型的每个键可以有不同的值，不局限于关系型数据库中的字段。同时，他也不能像关系型数据库那样进行复杂查询。</p>
<p>关于缓存关系型数据库中每行信息（用户信息），有3种方式可以实现：</p>
<p><strong>1)    string字符串类型</strong></p>
<p>每个属性一个键，例如</p>
<p>set user:1:name guoc12</p>
<p>set user:1:age 34</p>
<p>set user:1:city Tianjin</p>
<p>优点：简单直观。</p>
<p>缺点：占用过多的键，内存占用量较大。用户信息内聚性差（在不了解键命名规则的基础上很难查询所有值的信息）</p>
<p><strong>2)    序列化字符串类型</strong></p>
<p>将用户信息序列化后用一个键保存，例如：</p>
<p>set user:1 serialize(userInfo)</p>
<p>优点：简化编程。</p>
<p>缺点：序列化和反序列化需要一定的开销。每次更新某个属性或者获取某个属性都需要将全部属性都取出。</p>
<p><strong>3)    hash哈希类型</strong></p>
<p>每个用户属性使用一个键值对，但都是用一个键保存。</p>
<p>hset user:1 name guoc12 age 34 city Tianjin</p>
<p>优点：简单直观。</p>
<p>缺点：当使用hashtable编码会消耗更多内存。</p>
<h4 id="3-list（列表）"><a href="#3-list（列表）" class="headerlink" title="3.  list（列表）"></a>3.  list（列表）</h4><p>list（列表）用于存储多个有序的字符串，每个字符串称为element（元素），一个list最多存储232-1个元素。</p>
<p>列表有2个特点：</p>
<p><strong>1.   有序</strong></p>
<p><strong>2.   可以重复</strong></p>
<p><strong>3.1  常用命令</strong></p>
<p>列表的命令有很多，可以从列表的两端（r和l）对列表进行push（插入）和pop（弹出）操作。还可以获得指定范围内的元素列表，获取指定索引下标的元素等。</p>
<p>列表命令通常以l，r开头。例如lpush，rpush，ltrim，lrange等等。</p>
<p><strong>1)    ltrim</strong></p>
<p>ltrim [key] [start] [end]</p>
<p>例如一个列表是 testlist中包含 a,s,d,f ，在执行完ltrim testlist 1,3 之后，会剩余s,d,f。</p>
<p><strong>2)    blpop&#x2F;brpop</strong></p>
<p>他们是lpop&#x2F;rpop（左右侧弹出）的阻塞版本。命令如下：</p>
<p>blpop [key…] [seconds]</p>
<p>意思是：</p>
<p>a.    如果可以弹出，那么立即弹出。如果不可以弹出，那么等待seconds秒。期间可以弹出时立即弹出，否则等待时间到后返回nil。当seconds为0时，持续等待。</p>
<p>b.    当key为多个时，比如blpop list1 list2 list3 0，会按照从左至右的顺序，一旦有一个可以弹出，客户端立刻返回。</p>
<p>c.    当多个客户端对同一个键执行blpop命令时，最先执行（命令最先到达Redis服务器）的客户端会获取到弹出的值。剩下的客户端依次弹出或继续阻塞。</p>
<p><strong>3.2  内部编码</strong></p>
<p>list列表类型的内部编码有2种：</p>
<p><strong>1)    ziplist</strong></p>
<p>当列表元素个数小于512个、同时列表中每个元素的值都小于64字节（512与64同样是可配，但与hash类型的配置项不同）。</p>
<p><strong>2)    linkedlist</strong></p>
<p>不满足ziplist条件时，使用linkedlist进行内部实现。</p>
<p><strong>3.3  使用场景</strong></p>
<p><strong>1)    消息队列</strong></p>
<p>lpush+brpop</p>
<p><strong>2)    普通队列</strong></p>
<p>lpush+rpop</p>
<p><strong>3)    栈</strong></p>
<p>lpush+lpop</p>
<p><strong>4)    有限集合</strong></p>
<p>lpush+ltrim</p>
<h4 id="4-set（集合）"><a href="#4-set（集合）" class="headerlink" title="4.  set（集合）"></a>4.  set（集合）</h4><p>set集合也是用来保存多个字符串元素，但是与列表不同：集合中的元素是无序的，并且是不能重复的。一个集合同样能够存储232-1个元素。</p>
<p><strong>4.1  常用命令</strong></p>
<p>集合除了支持增删改查操作外，还支持多个集合取并集、交集、差集等等。</p>
<p>集合命令通常以s开头。</p>
<p><strong>1)    spop&#x2F;srandmember</strong></p>
<p>spop [key] 从集合内随机弹出一个元素</p>
<p>srandmember [key] [count] 从集合内随机返回指定个元素</p>
<p>两者都是随机弹，但是spop命令执行后，元素会从集合中删除，而srandmember不会。</p>
<p><strong>2)    sinter&#x2F;sunion&#x2F;sdiff</strong></p>
<p>sinter [key1] [key2] 返回key1和key2的交集</p>
<p>sunion [key1] [key2] 返回key1和key2的并集</p>
<p>sdiff [key1] [key2] 返回key1和key2的差集（key1里有但是key2里没有的）</p>
<p><strong>4.2  内部编码</strong></p>
<p><strong>1)    intset</strong></p>
<p>当集合中的元素都是整数，且元素个数小于512（可配）个时，Redis会选用intset作为集合的内部实现。</p>
<p><strong>2)    hashtable</strong></p>
<p>当集合类型无法满足intset条件时，Redis会使用hashtable作为内部实现。</p>
<p><strong>4.3  使用场景</strong></p>
<p><strong>1)    标签</strong></p>
<p>sadd</p>
<p><strong>2)    抽奖，随机数</strong></p>
<p>spop&#x2F;srandmember</p>
<p><strong>3)    社交（共同好友，共同关注）</strong></p>
<p>sadd + sinter</p>
<h4 id="5-zset（有序集合）"><a href="#5-zset（有序集合）" class="headerlink" title="5.  zset（有序集合）"></a>5.  zset（有序集合）</h4><p>有序集合跟集合类似，不能有重复成员。不同的是他可以排序。但是他与列表使用下标索引进行排序不同，他给每个元素设置一个score（分数）作为排序的依据。元素不能重复，但是score可以重复。</p>
<p><strong>5.1  常用命令</strong></p>
<p>有序集合的命令通常以z开头。常用命令除增删改查外，还包括计算排名、增加分数、返回排名，返回分数范围内的成员。也支持交集和并集操作但比较复杂。</p>
<p><strong>5.2  内部编码</strong></p>
<p><strong>1)    ziplist</strong></p>
<p>当有序集合的元素个数小于128个，同时每个元素的值都小于64字节时，Redis会使用ziplist作为有序集合的内部实现。</p>
<p><strong>2)    skiplist</strong></p>
<p>当ziplist条件不满足时，使用skiplist作为内部实现。</p>
<p><strong>5.3  使用场景</strong></p>
<p>排行榜系统（按照score查询或排序）</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" rel="tag"># 数据类型</a>
              <a href="/tags/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" rel="tag"># 常用命令</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/02/09/MySQL%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93-3/" rel="prev" title="MySQL技术总结-3">
                  <i class="fa fa-chevron-left"></i> MySQL技术总结-3
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/02/14/Redis%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%932-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="next" title="Redis技术总结2-数据结构">
                  Redis技术总结2-数据结构 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭超</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
